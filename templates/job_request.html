{% extends 'main.html' %}
{% load static %}

{% block content %}

<div style="width: 70%;margin: auto; margin-top: 99px;">

    <style>
        .skills {
            background-color: rgb(0, 151, 118);
            font-size: 19px;
            border-radius: 5px;
        }

        .text-muted {
            text-align: justify;
        }
    </style>
    <div class="col-12 mb-4 px-5" style="border: 1px solid rgb(177, 177, 177);">
        <div>
            <div class="py-4">
                <span class="badge skills mb-2">${{ job_database.job_amount }}</span>
                <span class="text-muted" style="float: right;"><small>{{ job_database.date }}</small></span>
                <h4 class="fw-bold">{{ job_database.job_category }}</h4>
                <p class="text-muted">{{ job_database.job_detail }}</p>
                <p class="text-muted">Buyer Name: {{ job_database.name }}</p>
            </div>
        </div>
    </div>
</div>
<style>
    .job_request {
        width: 70%;
        margin: auto;
        border: 1px solid rgb(177, 177, 177);
    }
</style>



{% for job_request_database in job_request %}
{% if job_request_database.username == user.username and job_request_database.request_id == job_database.id %}
<style>
    .job_request_form {
        display: none;
    }
</style>
{% endif %}


{% endfor %}





<form action="{% url 'job_request_f' %}" method="POST">
    {% csrf_token %}
    <div class="p-5 job_request job_request_form">
        <div style="text-align:center;">
            {% for message in messages %}


            <div class="alert {{ message.tags }} alert-dismissible fade show" role="alert">
                <strong></strong>{{ message }}
            </div>
            {% endfor %}
        </div>
        <input name="username" value="{{ user.username }}" type="hidden">
        <input name="name" value="{{ user.get_full_name }}" type="hidden">
        <input name="email" value="{{ user.email }}" type="hidden">
        <input name="request_id" value="{{ job_database.id }}" type="hidden">
        <div class="row justify-content-center">
            <div class="col-lg-6 col-md-6 col-sm-12">
                <label><b>Your Desire Amount: </b></label>
                <br>
                <input name="amount" type="number" value=500>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-12">
                <label><b>Days To Complete: </b></label>
                <br>
                <input name="time" type="number" value=7>

            </div>

        </div>

        <div class="row mt-3">
            <div class="col-12">
                <label><b>Request Your Proposal: </b></label>
                <br>
                <textarea class="p-1" name="description" id="" rows="7" style="width: 100%;"
                    placeholder="Describe about your proposal which is help your client for knowing you?"></textarea>

            </div>

        </div>
        <div class="row justify-content-end">
            <div class="col">
                <button class="p-3 mt-3" type="submit"
                    style="width: 100%;border: none;background-color: rgb(0, 151, 118);color: white;"><b>Submit</b></button>

            </div>

        </div>

    </div>
</form>

<div class="p-5 job_request" style="height: 700px;overflow:scroll;">

    {% for job_request_database in job_request %}

    {% if job_request_database.request_id == job_database.id %}
    <div class="card">
        <div class="card-header">
            {{ job_request_database.name }}
        </div>
        <div class="card-body">
            <p class="card-title">Desire Amount: {{ job_request_database.amount }}</p>
            <p class="card-text text-muted">I will complete the project between {{ job_request_database.time }} days</p>
            {% if job_database.username == user.username %}
            <style>
                .hide {
                    display: none;
                }
            </style>
            <p class="card-tex">{{ job_request_database.description }}</p>
            {% endif %}
            <p class="card-text text-muted hide"><small>Details Hidden <svg xmlns="http://www.w3.org/2000/svg"
                        width="13" height="13" fill="currentColor" class="bi bi-file-lock2" viewBox="0 0 16 16">
                        <path
                            d="M8 5a1 1 0 0 1 1 1v1H7V6a1 1 0 0 1 1-1zm2 2.076V6a2 2 0 1 0-4 0v1.076c-.54.166-1 .597-1 1.224v2.4c0 .816.781 1.3 1.5 1.3h3c.719 0 1.5-.484 1.5-1.3V8.3c0-.627-.46-1.058-1-1.224z" />
                        <path
                            d="M4 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H4zm0 1h8a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1z" />
                    </svg></small></p>

            {% if job_database.username == user.username %}



            <a href=""
                style="background-color: rgb(0, 151, 118);color: white; border-radius: 5px; padding: 7px;">Confirm</a>
            <a href="{% url 'job_request_profile' job_request_database.pk %}"
                style="background-color: rgb(0, 151, 118);color: white; border-radius: 5px; padding: 7px;">Contact</a>
            {% endif %}
        </div>
    </div>
    <br>
    {% endif %}
    {% endfor %}
</div>



{% endblock content %}